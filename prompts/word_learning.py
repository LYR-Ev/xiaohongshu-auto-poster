"""
英语单词学习 · 小红书图文帖 Prompt 模板
独立、可复用的模板函数
输出为结构化文本，便于自动拆标题、塞标签、喂配图建议。
"""

PROMPT_VERSION = "word_learning_v1"


def _get_level_specific_guidance(level: str) -> str:
    """
    根据难度水平返回内容结构微调指导。
    
    Args:
        level: 难度水平，如 "CET-4"、"CET-6"、"GRE" 等
    
    Returns:
        针对该难度的内容指导文本
    """
    level_upper = level.upper()
    
    if "CET-4" in level_upper or "四级" in level:
        return """
【内容重点】
- 偏记忆技巧：多用场景记忆，不要谐音，避免让读者感到云里雾里
- 强调高频：突出这个词在日常/考试中的常见度
- 例句贴近生活：选择日常对话、校园场景
- 简洁，要求一开始说清楚单词的中文释义
"""
    elif "CET-6" in level_upper or "六级" in level or "考研" in level:
        return """
【内容重点】
- 偏搭配用法：重点讲常见搭配、固定短语
- 强调语境：说明这个词在什么语境下用，与近义词的区别
- 例句贴近工作/学术：选择职场、学术场景
"""
    elif "GRE" in level_upper or "托福" in level_upper or "TOEFL" in level_upper:
        return """
【内容重点】
- 偏词源词根：讲解词根词缀，帮助理解词义演变
- 强调学术例句：选择学术论文、正式文本中的例句
- 深度辨析：与同义词、近义词的细微差别
"""
    else:
        # 默认（通用）
        return """
【内容重点】
- 记忆技巧：联想、场景记忆等
- 实用例句：贴近日常使用
- 清晰讲解：通俗易懂
"""


def build_word_learning_prompt(word: str, level: str = "CET-6") -> str:
    """
    构建英语单词学习类小红书 Prompt。
    要求模型按【标题】【单词卡】【配图建议】【正文】【标签】【meta】六段式输出。

    Args:
        word: 要学习的英语单词
        level: 难度水平，如 "CET-4"、"CET-6"、"考研" 等，默认 "CET-6"

    Returns:
        可直接传给 LLM 的 prompt 字符串
    """
    tone = "轻松、有记忆点"
    level_guidance = _get_level_specific_guidance(level)
    
    return f"""
你是一位非常擅长做【英语单词学习】内容的小红书创作者。

请围绕下面这个英语单词，生成一篇【适合小红书发布的图文帖】。

【核心要求】
- 学习单词：{word}
- 难度水平：{level}
- 整体风格：{tone}
- 目标读者：英语学习者 / 上班族 / 学生 / 四六级考生 / 考研考生

{level_guidance}

【你必须按以下六段式结构输出，每段以标记开头、换行后写内容】

【标题】
（写一行吸引眼球的标题，15～25 字，可含 emoji）

【单词卡】
（适合做成封面图的内容：单词英文小写、中文核心含义 1 条，简洁）

【配图建议】
（用一两句话描述「这张配图建议画什么 / 放什么元素」，供后期自动生成配图使用，例如：主画面是单词 abandon 小字体，背景为纯色，色调偏灰蓝）

【正文】
（包含：单词讲解、2 条高频例句中英对照、记忆技巧、小红书风格总结 2～3 句 + 引导点赞/收藏。段落清晰，适合手机阅读，emoji 适度）

【标签】
（一行，格式如：#英语学习  #CET4  #记单词  #考研英语 …… 10 个标签，不要换行，不要重复）

【meta】
prompt={PROMPT_VERSION}

【格式要求】
- 每段必须且仅以「【标题】」「【单词卡】」「【配图建议】」「【正文】」「【标签】」「【meta】」之一开头，后接换行再写该段内容。
- 不要出现"作为一个 AI"等自述，不要在任何一段外加解释说明。

请严格按以上结构输出，不要添加额外解释说明。
"""
